angular.module("AClassAbove",[]).provider("AClassAbove",function(){this.$get=["Prototype.Class","AClassAbove.ExtendableEnumerables","AClassAbove.Convenience",function(i,t){var n=Array.prototype.slice.call(arguments,1),e=i.create();function o(t){angular.forEach(t,function(t,n){this.addInheritableProperties(n),this[n]=t}.bind(this))}function s(){var n=Array.prototype.slice.call(arguments,0);angular.forEach(n,function(t){var n;this.hasOwnProperty(t)||(this._inheritableClassProperties.push(t),n="___"+t,Object.defineProperty(this,t,{get:function(){return this.hasOwnProperty(n)?this[n]:this.superclass?this.superclass[t]:void 0},set:function(t){this[n]=t}}))}.bind(this)),angular.forEach(this.subclasses,function(t){t.addInheritableProperties(n)})}return e._inheritableClassProperties=[],e.extend=o,e.addInheritableProperties=s,e.ancestors=[],e.extend({subclass:function(t){var n;(t=t||{}).constructor==Function&&(n=t,t={});var e,r=i.create(this,t);return r.extend=o,r._inheritableClassProperties=[],r.addInheritableProperties=s,r.addInheritableProperties.apply(r,this._inheritableClassProperties),r.ancestors=this.ancestors.concat([this]),n&&(e=n.apply(r)||{},r.addMethods(e)),r},include:function(t){this.addMethods(t)}}),angular.forEach(n,function(t){e.extend(t.classMixin||{}),e.include(t.instanceMixin||{})}.bind(this)),angular.extend(e,e.classMixin)}]}),angular.module("AClassAbove").factory("AModuleAbove",["AClassAbove",function(t){var n=t.subclass(function(){return{initialize:function(t){this.included=t.included||function(){},this.classMixin=t.classMixin||{},delete t.included,delete t.classMixin,this.instanceMixin=t},includeIn:function(t){t.include(this.instanceMixin),t.extend(this.classMixin),this.included(t)}}});return t.extend({_includeWithoutAModuleAbove:t.include}),t.include=function(t){t.constructor===n?t.includeIn(this):this._includeWithoutAModuleAbove(t)},n}]),angular.module("AClassAbove").factory("AClassAbove.Convenience",[function(){return{classMixin:{inheritsFrom:function(t){return this===t||-1<this.ancestors.indexOf(t)}},instanceMixin:{isA:function(t){return this.constructor.inheritsFrom(t)}}}}]),angular.module("AClassAbove").factory("AClassAbove.ExtendableEnumerables",[function(){return{classMixin:{extendableArray:function(r){var i="_local_"+r,t={};t[r]=function(){this.hasOwnProperty(i)||(this[i]=[]);var t,n=[],e=this[i];return this.superclass&&this.superclass[r]&&(t=this.superclass[r](),n=n.concat(t)),(n=n.concat(e)).push=function(){e.push.apply(e,arguments)},n},this.extend(t)},extendableObject:function(r){var i="_local_"+r,t={};t[r]=function(){this.hasOwnProperty(i)||(this[i]={});var t,n=Object.create({set:function(t,n){e[t]=n}}),e=this[i];return this.superclass&&this.superclass[r]&&(t=this.superclass[r](),angular.extend(n,t)),n=angular.extend(n,e)},this.extend(t)}}}}]),angular.module("AClassAbove").factory("Prototype.Array",[function(){return function(t){return Array.prototype.slice.call(t)}}]),Function.prototype.wrap=function(n){var e=this;return function(){var t=function(t,n){for(var e=t.length,r=n.length;r--;)t[e+r]=n[r];return t}([e.bind(this)],arguments);return n.apply(this,t)}},Function.prototype.argumentNames=function(){var t=this.toString().match(/^[\s\(]*[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return 1!=t.length||t[0]?t:[]},angular.module("AClassAbove").factory("Prototype.Class",["Prototype.Array","Prototype.Object",function(o,u){var c,s=function(){},a=(c=function(){for(var t in{toString:1})if("toString"===t)return!1;return!0}(),{create:function(){var t=null,n=o(arguments);function e(){this.initialize.apply(this,arguments)}u.isFunction(n[0])&&(t=n.shift()),u.extend(e,a.Methods),e.superclass=t,e.subclasses=[],t&&(l.prototype=t.prototype,e.prototype=new l,t.subclasses.push(e));for(var r=0,i=n.length;r<i;r++)e.addMethods(n[r]);return e.prototype.initialize||(e.prototype.initialize=s),e.prototype.constructor=e},Methods:{addMethods:function(t){var n=this.superclass&&this.superclass.prototype,e=u.keys(t);c&&(t.toString!=u.prototype.toString&&e.push("toString"),t.valueOf!=u.prototype.valueOf&&e.push("valueOf"));for(var r=0,i=e.length;r<i;r++){var o,s=e[r],a=t[s];n&&u.isFunction(a)&&"$super"==a.argumentNames()[0]&&(o=a,(a=function(t){return function(){return n[t].apply(this,arguments)}}(s).wrap(o)).valueOf=function(t){return function(){return t.valueOf.call(t)}}(o),a.toString=function(t){return function(){return t.toString.call(t)}}(o)),this.prototype[s]=a}return this}}});function l(){}return a}]),angular.module("AClassAbove").factory("Prototype.Object",[function(){var h,p,i,n,e,r,o,s,d,y,v,b,g,t,a,u,c={prototype:Object.prototype};function A(t){switch(t){case null:return n;case void 0:return e}switch(typeof t){case"boolean":return r;case"number":return o;case"string":return s}return d}function l(t,n){for(var e in n)t[e]=n[e];return t}function f(t){return p.call(t)===g}function O(t){return void 0===t}return p=(h=c).prototype.toString,i=h.prototype.hasOwnProperty,n="Null",e="Undefined",r="Boolean",o="Number",s="String",d="Object",y="[object Boolean]",v="[object Number]",b="[object String]",g="[object Array]",t=window.JSON&&"function"==typeof JSON.stringify&&"0"===JSON.stringify(0)&&void 0===JSON.stringify(function(t){return t}),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],u=function(){for(var t in{toString:1})if("toString"===t)return!1;return!0}(),"function"==typeof Array.isArray&&Array.isArray([])&&!Array.isArray({})&&(f=Array.isArray),l(h,{extend:l,inspect:function(t){try{return O(t)?"undefined":null===t?"null":t.inspect?t.inspect():String(t)}catch(t){if(t instanceof RangeError)return"...";throw t}},toJSON:t?function(t){return JSON.stringify(t)}:function(t){return function t(n,e,r){var i=e[n];A(i)===d&&"function"==typeof i.toJSON&&(i=i.toJSON(n));var o=p.call(i);switch(o){case v:case y:case b:i=i.valueOf()}switch(i){case null:return"null";case!0:return"true";case!1:return"false"}var s=typeof i;switch(s){case"string":return i.inspect(!0);case"number":return isFinite(i)?String(i):"null";case"object":for(var a=0,u=r.length;a<u;a++)if(r[a]===i)throw new TypeError("Cyclic reference to '"+i+"' in object");r.push(i);var c=[];if(o===g){for(var a=0,u=i.length;a<u;a++){var l=t(a,i,r);c.push(void 0===l?"null":l)}c="["+c.join(",")+"]"}else{for(var f=h.keys(i),a=0,u=f.length;a<u;a++){var n=f[a],l=t(n,i,r);void 0!==l&&c.push(n.inspect(!0)+":"+l)}c="{"+c.join(",")+"}"}return r.pop(),c}}("",{"":t},[])},toQueryString:function(t){return $H(t).toQueryString()},toHTML:function(t){return t&&t.toHTML?t.toHTML():String.interpret(t)},keys:h.keys||function(t){if(A(t)!==d)throw new TypeError;var n,e=[];for(n in t)i.call(t,n)&&e.push(n);if(u)for(var r=0;n=a[r];r++)i.call(t,n)&&e.push(n);return e},values:function(t){var n,e=[];for(n in t)e.push(t[n]);return e},clone:function(t){return l({},t)},isElement:function(t){return!(!t||1!=t.nodeType)},isArray:f,isHash:function(t){return t instanceof Hash},isFunction:function(t){return"[object Function]"===p.call(t)},isString:function(t){return p.call(t)===b},isNumber:function(t){return p.call(t)===v},isDate:function(t){return"[object Date]"===p.call(t)},isUndefined:O}),c}]),angular.module("AClassAbove").factory("Singleton",["$injector",function(t){return new(t.get("AModuleAbove"))({included:function(t){Object.defineProperty(t,"instance",{get:function(){return this._instance=this._instance||this.createInstance(),this._instance}})},classMixin:{createInstance:function(){return new this},defineSingletonProperty:function(){Array.prototype.slice.call(arguments,0).forEach(function(n){Object.defineProperty(this,n,{get:function(){var t=this.instance[n];return"function"==typeof t?t.bind(this.instance):t},set:function(){throw new Error(n+" cannot be set.  If you are trying to mock this in tests, mock it on the prototype")}})}.bind(this))}}})}]);