angular.module("AClassAbove",[]).provider("AClassAbove",function(){this.$get=["Prototype.Class","AClassAbove.ExtendableEnumerables","AClassAbove.Convenience",function(a){function b(a){angular.forEach(a,function(a,b){this.addInheritableProperties(b),this[b]=a}.bind(this))}function c(){var a=Array.prototype.slice.call(arguments,0);angular.forEach(a,function(a){if(!this.hasOwnProperty(a)){this._inheritableClassProperties.push(a);var b="___"+a;Object.defineProperty(this,a,{get:function(){return this.hasOwnProperty(b)?this[b]:this.superclass?this.superclass[a]:void 0},set:function(a){this[b]=a}})}}.bind(this)),angular.forEach(this.subclasses,function(b){b.addInheritableProperties(a)})}var d=Array.prototype.slice.call(arguments,1),e=a.create();return e._inheritableClassProperties=[],e.extend=b,e.addInheritableProperties=c,e.ancestors=[],e.extend({subclass:function(d){var e;d||(d={}),d.constructor==Function&&(e=d,d={});var f=a.create(this,d);if(f.extend=b,f._inheritableClassProperties=[],f.addInheritableProperties=c,f.addInheritableProperties.apply(f,this._inheritableClassProperties),f.ancestors=this.ancestors.concat([this]),e){var g=e.apply(f)||{};f.addMethods(g)}return f},include:function(a){this.addMethods(a)}}),angular.forEach(d,function(a){e.extend(a.classMixin||{}),e.include(a.instanceMixin||{})}.bind(this)),angular.extend(e,e.classMixin)}]}),angular.module("AClassAbove").factory("AModuleAbove",["AClassAbove",function(a){var b=a.subclass(function(){return{initialize:function(a){this.included=a.included||function(){},this.classMixin=a.classMixin||{},delete a.included,delete a.classMixin,this.instanceMixin=a},includeIn:function(a){a.include(this.instanceMixin),a.extend(this.classMixin),this.included(a)}}});return a.extend({_includeWithoutAModuleAbove:a.include}),a.include=function(a){a.constructor===b?a.includeIn(this):this._includeWithoutAModuleAbove(a)},b}]),angular.module("AClassAbove").factory("AClassAbove.Convenience",[function(){return{classMixin:{inheritsFrom:function(a){return this===a||this.ancestors.indexOf(a)>-1}},instanceMixin:{isA:function(a){return this.constructor.inheritsFrom(a)}}}}]),angular.module("AClassAbove").factory("AClassAbove.ExtendableEnumerables",[function(){return{classMixin:{extendableArray:function(a){var b="_local_"+a,c={};c[a]=function(){this.hasOwnProperty(b)||(this[b]=[]);var c=[],d=this[b];if(this.superclass&&this.superclass[a]){var e=this.superclass[a]();c=c.concat(e)}return c=c.concat(d),c.push=function(){d.push.apply(d,arguments)},c},this.extend(c)},extendableObject:function(a){var b="_local_"+a,c={};c[a]=function(){this.hasOwnProperty(b)||(this[b]={});var c=Object.create({set:function(a,b){d[a]=b}}),d=this[b];if(this.superclass&&this.superclass[a]){var e=this.superclass[a]();angular.extend(c,e)}return c=angular.extend(c,d)},this.extend(c)}}}}]),angular.module("AClassAbove").factory("Prototype.Array",[function(){return function(a){return Array.prototype.slice.call(a)}}]),function(){function a(a,b){for(var c=a.length,d=b.length;d--;)a[c+d]=b[d];return a}function b(){var a=this.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return 1!=a.length||a[0]?a:[]}function c(b){var c=this;return function(){var d=a([c.bind(this)],arguments);return b.apply(this,d)}}Function.prototype.wrap=c,Function.prototype.argumentNames=b}(),angular.module("AClassAbove").factory("Prototype.Class",["Prototype.Array","Prototype.Object",function(a,b){var c={emptyFunction:function(){}},d=function(){function e(){}function f(){function f(){this.initialize.apply(this,arguments)}var g=null,h=a(arguments);b.isFunction(h[0])&&(g=h.shift()),b.extend(f,d.Methods),f.superclass=g,f.subclasses=[],g&&(e.prototype=g.prototype,f.prototype=new e,g.subclasses.push(f));for(var i=0,j=h.length;j>i;i++)f.addMethods(h[i]);return f.prototype.initialize||(f.prototype.initialize=c.emptyFunction),f.prototype.constructor=f,f}function g(a){var c=this.superclass&&this.superclass.prototype,d=b.keys(a);h&&(a.toString!=b.prototype.toString&&d.push("toString"),a.valueOf!=b.prototype.valueOf&&d.push("valueOf"));for(var e=0,f=d.length;f>e;e++){var g=d[e],i=a[g];if(c&&b.isFunction(i)&&"$super"==i.argumentNames()[0]){var j=i;i=function(a){return function(){return c[a].apply(this,arguments)}}(g).wrap(j),i.valueOf=function(a){return function(){return a.valueOf.call(a)}}(j),i.toString=function(a){return function(){return a.toString.call(a)}}(j)}this.prototype[g]=i}return this}var h=function(){for(var a in{toString:1})if("toString"===a)return!1;return!0}();return{create:f,Methods:{addMethods:g}}}();return d}]),angular.module("AClassAbove").factory("Prototype.Object",[function(){var a={prototype:Object.prototype};return function(a){function b(a){switch(a){case null:return x;case void 0:return y}var b=typeof a;switch(b){case"boolean":return z;case"number":return A;case"string":return B}return C}function c(a,b){for(var c in b)a[c]=b[c];return a}function d(a){try{return t(a)?"undefined":null===a?"null":a.inspect?a.inspect():String(a)}catch(b){if(b instanceof RangeError)return"...";throw b}}function e(a){return f("",{"":a},[])}function f(c,d,e){var g=d[c];b(g)===C&&"function"==typeof g.toJSON&&(g=g.toJSON(c));var h=v.call(g);switch(h){case F:case E:case G:g=g.valueOf()}switch(g){case null:return"null";case!0:return"true";case!1:return"false"}var i=typeof g;switch(i){case"string":return g.inspect(!0);case"number":return isFinite(g)?String(g):"null";case"object":for(var j=0,k=e.length;k>j;j++)if(e[j]===g)throw new TypeError("Cyclic reference to '"+g+"' in object");e.push(g);var l=[];if(h===H){for(var j=0,k=g.length;k>j;j++){var m=f(j,g,e);l.push("undefined"==typeof m?"null":m)}l="["+l.join(",")+"]"}else{for(var n=a.keys(g),j=0,k=n.length;k>j;j++){var c=n[j],m=f(c,g,e);"undefined"!=typeof m&&l.push(c.inspect(!0)+":"+m)}l="{"+l.join(",")+"}"}return e.pop(),l}}function g(a){return JSON.stringify(a)}function h(a){return $H(a).toQueryString()}function i(a){return a&&a.toHTML?a.toHTML():String.interpret(a)}function j(a){if(b(a)!==C)throw new TypeError;var c=[];for(var d in a)w.call(a,d)&&c.push(d);if(L)for(var e=0;d=K[e];e++)w.call(a,d)&&c.push(d);return c}function k(a){var b=[];for(var c in a)b.push(a[c]);return b}function l(a){return c({},a)}function m(a){return!(!a||1!=a.nodeType)}function n(a){return v.call(a)===H}function o(a){return a instanceof Hash}function p(a){return v.call(a)===D}function q(a){return v.call(a)===G}function r(a){return v.call(a)===F}function s(a){return v.call(a)===I}function t(a){return"undefined"==typeof a}var u={K:function(a){return a}},v=a.prototype.toString,w=a.prototype.hasOwnProperty,x="Null",y="Undefined",z="Boolean",A="Number",B="String",C="Object",D="[object Function]",E="[object Boolean]",F="[object Number]",G="[object String]",H="[object Array]",I="[object Date]",J=window.JSON&&"function"==typeof JSON.stringify&&"0"===JSON.stringify(0)&&"undefined"==typeof JSON.stringify(u.K),K=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],L=function(){for(var a in{toString:1})if("toString"===a)return!1;return!0}(),M="function"==typeof Array.isArray&&Array.isArray([])&&!Array.isArray({});M&&(n=Array.isArray),c(a,{extend:c,inspect:d,toJSON:J?g:e,toQueryString:h,toHTML:i,keys:a.keys||j,values:k,clone:l,isElement:m,isArray:n,isHash:o,isFunction:p,isString:q,isNumber:r,isDate:s,isUndefined:t})}(a),a}]),angular.module("AClassAbove").factory("Singleton",["$injector",function(a){var b=a.get("AModuleAbove");return new b({included:function(a){Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||this.createInstance(),this._instance}})},classMixin:{createInstance:function(){return new this},defineSingletonProperty:function(){var a=Array.prototype.slice.call(arguments,0);a.forEach(function(a){Object.defineProperty(this,a,{get:function(){var b=this.instance[a];return"function"==typeof b?b.bind(this.instance):b},set:function(){throw new Error(a+" cannot be set.  If you are trying to mock this in tests, mock it on the prototype")}})}.bind(this))}}})}]);